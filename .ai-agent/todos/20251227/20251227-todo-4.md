# TODO: Implement Automated Test for Level Resolution

## Objective
Create an automated test to verify that "sparse" level definitions correctly inherit properties from previous levels, preventing the Level 2 crash.

## Test Strategy
Since we are using a browser-based environment, we can use a **Playwright-driven Integration Test**.

### Test Steps
1.  **Launch Browser**: Navigate to `http://localhost:5173/`.
2.  **Inject Debug Hook**: Use `page.evaluate` to access the `Game` instance (if we make it global for testing) or monitor the console/DOM for Level 2 values.
3.  **Trigger Level Transition**:
    - Manually clear the first wave (using a cheat code or by calling `game.enemyWave.enemies = []` via console injection).
4.  **Verify Level 2 State**:
    - Check if `game.currentLevel` is `1` (which is Level 2 internally).
    - Assert that `game.currentLevelConfig.rows` is `5` (inherited from Level 1) and NOT `undefined`.
    - Assert that no `NaN` errors appear in the console.

## Implementation Plan
- [ ] Add a `window.game = this` hook in [`src/ts/Game.ts`](src/ts/Game.ts) constructor (guarded by a `process.env.NODE_ENV === 'development'` check).
- [ ] Create a test script `.kilocode/tests/level-resolution.test.js` using Playwright.
- [ ] Run the test using `npx playwright test`.

## Success Criteria
The test passes if Level 2 correctly inherits `rows: 5` and `cols: 6` while only defining its own `enemyTypes`.
