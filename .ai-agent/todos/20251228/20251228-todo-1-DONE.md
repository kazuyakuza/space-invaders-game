# TODO: Extensive and Correct Headless Unit Testing

## Objective
Update the headless unit tests to correctly reflect the intended game logic (not the current buggy behavior) and expand coverage to all level configuration properties. This will ensure the tests fail against the current buggy implementation, providing a clear path for bug fixing.

## Implementation Plan

### 1. Analysis and Verification
- [ ] Review `src/ts/Game.ts` logic for `resolveLevelConfig` and identify all properties that should be inherited or accumulated.
- [ ] Verify the mathematically correct expectations for each test case (Level 1, Level 2 inheritance, Level 3+ accumulation, Infinity fallback).
- [ ] Document the intended logic in the test file comments for clarity.

### 2. Update Test Expectations
- [ ] Modify `src/ts/__tests__/Game.test.ts` to use correct expectations:
    - Level 2 should inherit ALL properties from Level 1 except those explicitly overridden.
    - Level 3+ should correctly add `+` prefixed values to the base level values.
    - Infinity level should correctly accumulate deltas over the base of the last static level.

### 3. Expand Property Coverage
- [ ] Implement new test assertions or cases for every property in `LevelConfig`:
    - `rows`
    - `cols`
    - `speed`
    - `enemyCount`
    - `enemyHealth`
    - `enemyTypes` (verify it handles overrides or additions correctly)

### 4. Verification of Tests
- [ ] Run the tests and verify that they **FAIL** as expected with the current buggy implementation.
- [ ] Provide the test failure logs to confirm that the tests are capturing the logical errors.

## Benefits
- **Integrity**: Tests will act as a true specification of the intended behavior.
- **Regression Testing**: Extensive property coverage prevents future bugs in level resolution.
- **Documentation**: Tests serve as documentation for how level configuration inheritance works.
